---
layout: post
title:  "카카오 로그인 동시성 수정"
date:   2025-07-24 16:19:00 +0900
categories:
---
그저꼐는 앱에서 카카오 로그인을 수정했다
원래는 남의꺼 보고 유니티용 iOS 카카오 로그인 플러그인을 갖다가 쓰고있었는데
공유기능이 필요하다고 하여, 먼저번 업데이트에 스위프트 브릿지를 써서 오브젝티브c 코드를
유니티에서 플러그인으로 만들어 갖다가 쓰게 됐다.

인터넷에서 전에 봤던 남의 유니티 플러그인용 카카오 iOS sdk는 버전이 1 이었는데
공유기능을 새로 넣으려면 (내가 아는 선에서는) 카카오 sdk 버전 2.xxx를 써야되는 것 같아,
있는 코드를 쥐어뜯게 됐다.

이건 한달 전 얘기고, 그저께는 그래서,
적당히 발라놓은 코드이므로, 원래처럼 앱을 켤 때마다 매번 카톡 로그인을 하는 형태였는데,
sdk를 바꿔놨더니, 카톡로그인을 할 때마다 장면이 전환이 돼, 꽤나 불편해서,
원래 해야되는대로 토큰을 저장해서 체크하는 방식으로 고쳤다.
그 후 xcode를 빌드해서 돌리니,

첫 실행시에만 실패하고, 두번째부턴 정상적으로 동작하는 것이었다.
한국놈들은 sdk를 왜이리 못만들까 하고 욕하면서, 이거 저거 건드려봤으나, 내가보기엔 보이지 않았다.
그래서 대충 AI한테 물어보니, 동시성 처리가 안돼있다는 것처럼 뭐라 했다.

스위프트 문법을 잘 몰라서, 토큰을 위해 기존 코드를 고치면서, 
함수 만들어 처리하려니 입력값 출력값 쓸줄을 몰라서
토큰 문제생기면 변수 적당히 수정해서, 뒤에 변수 수정돼있으면 로그인 처리, 이런 식으로 하려고 했더니
변수를 체크할 때까지 아직 변수값을 리턴 받지 못하고 있던 것이다.

여튼 그거랑, 버튼그림 바꾸고, 빌드해서 올리고, 관리자 페이지 약간 바꿨다.